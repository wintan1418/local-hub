<% content_for :page_title, "Payment Successful!" %>
<% content_for :page_description, "Your subscription has been activated successfully." %>

<div class="min-h-screen bg-gradient-to-br from-green-50 via-blue-50 to-purple-50 flex items-center justify-center p-4">
  <!-- Success Container -->
  <div class="max-w-2xl w-full">
    <!-- Animated Success Icon -->
    <div class="text-center mb-8" data-aos="zoom-in" data-aos-duration="800">
      <div class="inline-flex items-center justify-center w-32 h-32 bg-gradient-to-br from-green-400 to-green-600 rounded-full shadow-2xl mb-6 animate-pulse-slow">
        <svg class="w-16 h-16 text-white animate-bounce-gentle" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
        </svg>
      </div>
      
      <!-- Confetti Animation -->
      <div class="confetti-container">
        <% 20.times do |i| %>
          <div class="confetti confetti-<%= i % 5 %>" style="animation-delay: <%= rand(0..2000) %>ms;"></div>
        <% end %>
      </div>
    </div>

    <!-- Success Card -->
    <div class="bg-white rounded-3xl shadow-2xl p-8 md:p-12 border border-gray-100" data-aos="fade-up" data-aos-delay="300" data-aos-duration="1000">
      <!-- Header -->
      <div class="text-center mb-8">
        <h1 class="text-4xl md:text-5xl font-black text-gray-900 mb-4" style="font-family: 'Poppins', sans-serif;">
          üéâ <span class="text-transparent bg-clip-text bg-gradient-to-r from-green-500 to-blue-500">Success!</span>
        </h1>
        <p class="text-xl text-gray-600 font-light leading-relaxed">
          Your subscription has been activated successfully!<br>
          Welcome to the next level of your business journey.
        </p>
      </div>

      <!-- Subscription Details -->
      <div class="bg-gradient-to-r from-green-50 to-blue-50 rounded-2xl p-6 mb-8" data-aos="fade-up" data-aos-delay="500">
        <div class="flex items-center justify-between">
          <div>
            <h3 class="text-lg font-semibold text-gray-900 mb-1">
              <%= @subscription.plan.name %> Plan Activated
            </h3>
            <p class="text-sm text-gray-600">
              <% if @subscription.status == 'trialing' %>
                üéÅ 14-day free trial started ‚Ä¢ First billing: <%= @subscription.current_period_end.strftime("%B %d, %Y") %>
              <% else %>
                üí≥ Active subscription ‚Ä¢ Next billing: <%= @subscription.current_period_end.strftime("%B %d, %Y") %>
              <% end %>
            </p>
          </div>
          <div class="text-right">
            <p class="text-2xl font-bold text-green-600">$<%= @subscription.plan.price %></p>
            <p class="text-sm text-gray-500">per month</p>
          </div>
        </div>
      </div>

      <!-- What's Next Section -->
      <div class="grid md:grid-cols-2 gap-6 mb-8" data-aos="fade-up" data-aos-delay="700">
        <div class="flex items-start space-x-4">
          <div class="w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0">
            <svg class="w-6 h-6 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.746 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"></path>
            </svg>
          </div>
          <div>
            <h4 class="font-semibold text-gray-900 mb-2">Create Your Services</h4>
            <p class="text-gray-600 text-sm">Start listing your services and attract customers.</p>
          </div>
        </div>

        <div class="flex items-start space-x-4">
          <div class="w-12 h-12 bg-purple-100 rounded-full flex items-center justify-center flex-shrink-0">
            <svg class="w-6 h-6 text-purple-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
            </svg>
          </div>
          <div>
            <h4 class="font-semibold text-gray-900 mb-2">Complete Your Profile</h4>
            <p class="text-gray-600 text-sm">Add photos, portfolio, and build trust with customers.</p>
          </div>
        </div>
      </div>

      <!-- Action Buttons -->
      <div class="flex flex-col sm:flex-row gap-4" data-aos="fade-up" data-aos-delay="900">
        <%= link_to provider_dashboard_path, class: "group flex-1 bg-gradient-to-r from-blue-600 to-purple-600 text-white px-8 py-4 rounded-xl font-semibold text-center hover:from-blue-700 hover:to-purple-700 transform hover:scale-105 transition-all duration-300 shadow-lg hover:shadow-xl" do %>
          <span class="flex items-center justify-center">
            Go to Dashboard
            <svg class="ml-2 w-5 h-5 transform group-hover:translate-x-1 transition-transform duration-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7l5 5m0 0l-5 5m5-5H6"></path>
            </svg>
          </span>
        <% end %>

        <%= link_to new_provider_service_path, class: "group flex-1 bg-white text-gray-700 px-8 py-4 rounded-xl font-semibold text-center border-2 border-gray-200 hover:border-gray-300 hover:bg-gray-50 transform hover:scale-105 transition-all duration-300" do %>
          <span class="flex items-center justify-center">
            Create Service
            <svg class="ml-2 w-5 h-5 transform group-hover:translate-x-1 transition-transform duration-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path>
            </svg>
          </span>
        <% end %>
      </div>

      <!-- Support Info -->
      <div class="mt-8 pt-8 border-t border-gray-100 text-center" data-aos="fade-up" data-aos-delay="1100">
        <p class="text-sm text-gray-500 mb-4">
          Need help getting started? We're here to support you!
        </p>
        <div class="flex justify-center space-x-6">
          <a href="#" class="text-sm text-blue-600 hover:text-blue-700 font-medium">
            üìß Contact Support
          </a>
          <a href="#" class="text-sm text-blue-600 hover:text-blue-700 font-medium">
            üìñ View Guide
          </a>
          <%= link_to provider_subscriptions_path, class: "text-sm text-blue-600 hover:text-blue-700 font-medium" do %>
            ‚öôÔ∏è Manage Subscription
          <% end %>
        </div>
      </div>
    </div>

    <!-- Bottom Stats -->
    <div class="grid grid-cols-3 gap-4 mt-8" data-aos="fade-up" data-aos-delay="1300">
      <div class="bg-white/70 backdrop-blur-sm rounded-2xl p-4 text-center border border-white/20">
        <div class="text-2xl font-bold text-green-600">14</div>
        <div class="text-xs text-gray-600">Day Free Trial</div>
      </div>
      <div class="bg-white/70 backdrop-blur-sm rounded-2xl p-4 text-center border border-white/20">
        <div class="text-2xl font-bold text-blue-600">‚àû</div>
        <div class="text-xs text-gray-600">Bookings</div>
      </div>
      <div class="bg-white/70 backdrop-blur-sm rounded-2xl p-4 text-center border border-white/20">
        <div class="text-2xl font-bold text-purple-600">24/7</div>
        <div class="text-xs text-gray-600">Support</div>
      </div>
    </div>
  </div>
</div>

<style>
  /* Custom Animations */
  @keyframes pulse-slow {
    0%, 100% {
      opacity: 1;
      transform: scale(1);
    }
    50% {
      opacity: 0.8;
      transform: scale(1.05);
    }
  }

  @keyframes bounce-gentle {
    0%, 100% {
      transform: translateY(0);
    }
    50% {
      transform: translateY(-5px);
    }
  }

  @keyframes confetti-fall {
    0% {
      transform: translateY(-100vh) rotate(0deg);
      opacity: 1;
    }
    100% {
      transform: translateY(100vh) rotate(360deg);
      opacity: 0;
    }
  }

  .animate-pulse-slow {
    animation: pulse-slow 3s ease-in-out infinite;
  }

  .animate-bounce-gentle {
    animation: bounce-gentle 2s ease-in-out infinite;
  }

  /* Confetti Styles */
  .confetti-container {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    pointer-events: none;
    z-index: 1000;
  }

  .confetti {
    position: absolute;
    width: 10px;
    height: 10px;
    animation: confetti-fall 3s linear infinite;
  }

  .confetti-0 {
    background: #ff6b6b;
    left: 10%;
    animation-duration: 3s;
  }

  .confetti-1 {
    background: #4ecdc4;
    left: 30%;
    animation-duration: 2.5s;
  }

  .confetti-2 {
    background: #45b7d1;
    left: 50%;
    animation-duration: 3.5s;
  }

  .confetti-3 {
    background: #f9ca24;
    left: 70%;
    animation-duration: 2.8s;
  }

  .confetti-4 {
    background: #6c5ce7;
    left: 90%;
    animation-duration: 3.2s;
  }

  /* Responsive Design */
  @media (max-width: 640px) {
    .confetti-container {
      display: none; /* Hide confetti on mobile for performance */
    }
  }
</style>

<script>
  // Auto-hide confetti after animation
  setTimeout(() => {
    const confetti = document.querySelector('.confetti-container');
    if (confetti) {
      confetti.style.opacity = '0';
      setTimeout(() => confetti.remove(), 1000);
    }
  }, 4000);

  // Add some interactive elements
  document.addEventListener('DOMContentLoaded', function() {
    // Add click effect to success icon
    const successIcon = document.querySelector('.w-32.h-32');
    if (successIcon) {
      successIcon.addEventListener('click', function() {
        this.style.animation = 'none';
        setTimeout(() => {
          this.style.animation = 'pulse-slow 3s ease-in-out infinite';
        }, 100);
      });
    }
  });
</script>